version: "3.9"

services:
  database:
    image: "postgres"
    env_file:
      - database.env
    ports:
      - "5432:5432"
    volumes:
      - database-data:/var/lib/postgresql/data/
  auth_app:
    build:
      context: .
      dockerfile: Dockerfile-auth
    container_name: auth_app
    ports:
      - "8080:8080"
    expose:
      - "8080"
    environment:
      - APP_CONFIG=/app/auth-application.conf
  routing_app:
    build:
      context: .
      dockerfile: Dockerfile-routing
    container_name: routing_app
    ports:
      - "8081:8081"
    expose:
      - "8081"
    environment:
      - APP_CONFIG=/app/routing-application.conf

volumes:
  database-data:
